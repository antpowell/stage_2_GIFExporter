{"version":3,"sources":["src\\EncodedImage.ts","src\\GIFGenerator.ts"],"names":[],"mappings":"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","file":"GIFGenerator.d1b878e2.map","sourceRoot":"..","sourcesContent":["export class EncodedImage {\n\tdata: number[] = [];\n\n\tconstructor() {}\n\n\tget() {\n\t\treturn this.data as number[];\n\t}\n\n\twrite(byte: number) {\n\t\tthis.data.push(byte);\n\t}\n\n\twriteArray(array: number[], arraySize: number) {\n\t\tfor (let i = 0; i < arraySize; i++) {\n\t\t\tthis.write(array[i]);\n\t\t}\n\t}\n\n\twriteUTF(UTF: string) {\n\t\tfor (let i = 0; i < UTF.length; i++) {\n\t\t\tthis.write(UTF.charCodeAt(i));\n\t\t}\n\t}\n\n\twriteColor(color: string) {\n\t\tfor (let i = 0; i < color.length; i += 2) {\n\t\t\tconst intValue: number = parseInt(color[i] + color[i + 1], 16);\n\t\t\tthis.write(intValue);\n\t\t}\n\t}\n\n\twriteLittleEndian(num: number) {\n\t\tthis.write(num & 0xff);\n\t\tthis.write((num >> 8) & 0xff);\n\t}\n}\n","import { EncodedImage } from './EncodedImage';\n///<reference path = 'JS/LZWEncoder.js'/>\n\nexport class GIFGenerator {\n\tstream: EncodedImage = new EncodedImage();\n\tbyteCount: number = 0;\n\twidth: number;\n\theight: number;\n\tencodedImage: EncodedImage = new EncodedImage();\n\tframeIndexedPixels: number[];\n\tframeCount: number = 0;\n\tGCT: string[];\n\n\tconstructor(width: number, height: number, GCT: string[]) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.GCT = GCT;\n\t\tconsole.log(`Generator now running...`);\n\t}\n\n\tinit() {\n\t\tthis.headerGenerator();\n\t\tthis.LSDGenerator();\n\t\tthis.GCTWriter();\n\t\tthis.AppExtGenerator();\n\t}\n\n\tgenerateFrame(indexedPixels: number[], frameCount?: number) {\n\t\tthis.frameIndexedPixels = indexedPixels;\n\t\tthis.frameCount += 1;\n\t\tconsole.log(`generating frame ${this.frameCount}`);\n\t\tthis.GCEGenerator();\n\t\tthis.imgDescGenerator();\n\t\tthis.imgDataGenerator();\n\t}\n\n\tdownload(filename: string) {\n\t\tthis.TrailerGenerator();\n\n\t\tconsole.log('downloading');\n\t\tconsole.log(this.stream);\n\n\t\tconst download = document.createElement('a');\n\t\tdownload.download = filename;\n\t\tdownload.href = URL.createObjectURL(\n\t\t\tnew Blob([new Uint8Array(this.stream.get())], {\n\t\t\t\ttype: 'image/gif'\n\t\t\t})\n\t\t);\n\t\tdownload.click();\n\t}\n\n\theaderGenerator() {\n\t\tthis.stream.writeUTF('GIF89a'); /* GIF Header */\n\t}\n\n\tLSDGenerator() {\n\t\tthis.stream.writeLittleEndian(this.width); /* Canvas Width */\n\t\tthis.stream.writeLittleEndian(this.height); /* Canvas Height */\n\t\tthis.stream.write(0xf7); /* Packed Field */\n\t\tthis.stream.write(0); /* Background Color Index */\n\t\tthis.stream.write(0); /* Pixel Aspect Ration */\n\t}\n\n\tGCEGenerator() {\n\t\tthis.stream.write(0x21); /* Extension Introducer */\n\t\tthis.stream.write(0xf9); /* Graphic Control Label */\n\t\tthis.stream.write(0x4); /* Byte Size */\n\t\tthis.stream.write(0x4); /* Packed Field */\n\t\tthis.stream.writeLittleEndian(0x32); /* Delay Time */\n\t\tthis.stream.write(0x0); /* Transparent Color Index */\n\t\tthis.stream.write(0x0); /* Block Terminator */\n\t}\n\n\timgDescGenerator() {\n\t\tthis.stream.write(0x2c); /* Image Seperator Always 2C */\n\t\tthis.stream.writeLittleEndian(0x0); /* Image Left */\n\t\tthis.stream.writeLittleEndian(0x0); /* Image Top */\n\t\tthis.stream.writeLittleEndian(this.width); /* Image Width */\n\t\tthis.stream.writeLittleEndian(this.height); /* Image Height */\n\t\tthis.stream.write(0x0); /* Block Terminator */\n\t}\n\n\tAppExtGenerator() {\n\t\tthis.stream.write(0x21); /* extension introducer */\n\t\tthis.stream.write(0xff); /* app extension label */\n\t\tthis.stream.write(11); /* block size */\n\t\tthis.stream.writeUTF('NETSCAPE' + '2.0'); /* app id + auth code */\n\t\tthis.stream.write(3); /* sub-block size */\n\t\tthis.stream.write(1); /* loop sub-block id */\n\t\tthis.stream.writeLittleEndian(\n\t\t\t0\n\t\t); /* loop count (extra iterations, 0=repeat forever) */\n\t\tthis.stream.write(0); /* Block Terminator */\n\t}\n\n\tTrailerGenerator() {\n\t\tthis.stream.write(0x3b); /* Trailer Marker */\n\t\tconsole.log(`Generator now finished.`);\n\t}\n\n\tGCTWriter() {\n\t\tlet count = 0;\n\n\t\tthis.GCT.forEach(color => {\n\t\t\tcount += 3;\n\t\t\tthis.stream.writeColor(color);\n\t\t});\n\n\t\tfor (let i = count; i < 3 * 256; i++) {\n\t\t\tthis.stream.write(0);\n\t\t}\n\t}\n\n\timgDataGenerator() {\n\t\tconst encoder = new LZWEncoder(\n\t\t\tthis.width,\n\t\t\tthis.height,\n\t\t\tthis.frameIndexedPixels,\n\t\t\t8\n\t\t);\n\t\tencoder.encode(this.stream);\n\t\tconsole.log(`completed frame ${this.frameCount}`);\n\t}\n\n\tLCTGenerator() {}\n\n\tPlainTextExtGenerator() {}\n\n\tCommentExtGenerator() {}\n\n\twriteLittleEndian(num: number) {\n\t\tthis.stream.write(num & 0xff);\n\t\tthis.stream.write((num >> 8) & 0xff);\n\t}\n}\n"]}